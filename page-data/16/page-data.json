{"componentChunkName":"component---src-templates-post-jsx","path":"/16/","result":{"data":{"site":{"siteMetadata":{"title":"황창구리의 개발 블로그"}},"markdownRemark":{"id":"ebe5e8aa-b589-564e-bf4d-05307ef1b652","excerpt":"1. 랭킹 서비스에 대한 이해 1.1 랭킹 서비스 개선 전 플로우  저번에는 일일 캐릭터 조회 랭킹 서비스를 위 그림과 같이 구성하여 진행했습니다. 아래에 다시 정리해보자면 클라이언트가 랭킹 데이터를 요청합니다. SpringBoot 서버에서 JPQL을 이용하여 랭킹 쿼리를 날립니다. 쿼리를 통해 조회된 데이터들이 클라이언트에게 전달됩니다. 랭킹 서비스를 …","html":"<h2>1. 랭킹 서비스에 대한 이해</h2>\n<h2>1.1 랭킹 서비스 개선 전 플로우</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/200fa/image-20.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC7ElEQVR42m1S7U9SURjnT3HT8HLhwgWEG8KFe4XLS4JcXlQUwRQTLuAL+LZA2sppy+XWB1urrZqtzdmn8kvrWx9rtbbWp7Za6lxby3IpIu+3By0j6+y3s7PnnN/zPL/feQTDkwuRqauOvgTbP8l0xkzeaD3MXo7wX3EOpthA4tQVQOAZnPZHMz3hVE8kbemOGz0cRCELnHWOoWTm+tPXG9+zhd3db85ggnZF6gsI2twRig1TrjDtCp9EKXYYgoT1/FBibntr68PG5otXr8754m1ujqmvzHRGj3ESgnRdoZlg7FIfN+uPpP1c+kLicoCb9QxMwdVfbf+RV+uH09pD8ZnFnf0vLzefFYqFcqV8kMvt7u4XS8Ufe3vBWMbgHD7pvEYGJaA8ND4HnmnbB2cXbvJ88eOnd9VKhef5g3z2zfbzUqnE89Wx9CIYYe6qI4MScNs9MMX2TziDydT8MnAqR0xYh4Xc+89vy+VytVoZTV37lxzpCCQD0YwzOOEIJJduPShXil93drLZbLFUyucLh7l8GQSUS+P/qxyBhv1cBlKAK3NLd6DgUakqX7eqfDU2PU92DJnB3dqPckdkD9feOwZte0Mz3tBFe2Bi+e7ayqP1+6tPjnFv9fHK2vqN2w+tvlFTZ5zpGgHA4ZdhQAPDYDBIW2+ryasgWYXeJSdZpd6l0LMKXUdt17Nas4+09sAbncVHOfprZKMnCjKs3SMwJ2KpQiQSohIMkynEUrlIjAEQESqSYIhEioixMwja2Iw2NDbKNW2//9nDGSGLO4xq2yR6g85s05odGquTsLJyxk4wdg1jV5osGGVCSRrRGoQaXYvZJaibmBiQJaQJM9B6q01jc7VaXBqr5yzTjlMMZmAwmhGRNAA1mBCSUlk8p8kighRrWnGCaFaoRfIWBFcjclWjrKVJphBKcSGubMaVTRjegKC4zlJPBvGcUmvBCboGFSVTUxI1LVEZMbVRqoKIAVfTcoKWKvWoVKOm2J/zc4xymuQb0gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='기존 랭킹 서비스' title='' src='/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/ca1dc/image-20.png' srcset='/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/e7570/image-20.png 170w,\n/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/f46e7/image-20.png 340w,\n/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/ca1dc/image-20.png 680w,\n/dev-blog/static/b92d202059ee7f2148c96620af1d1d34/200fa/image-20.png 913w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>기존 랭킹 서비스</figcaption>\n  </figure></p>\n<p>저번에는 일일 캐릭터 조회 랭킹 서비스를 위 그림과 같이 구성하여 진행했습니다. 아래에 다시 정리해보자면</p>\n<ol>\n<li>클라이언트가 랭킹 데이터를 요청합니다.</li>\n<li>SpringBoot 서버에서 JPQL을 이용하여 랭킹 쿼리를 날립니다.</li>\n<li>쿼리를 통해 조회된 데이터들이 클라이언트에게 전달됩니다.</li>\n</ol>\n<h3>랭킹 서비스를 개선해야하는 이유</h3>\n<p>해당 랭킹 서비스는 누군가를 조회하기전에 화면에서 필히 보여지며 사용자가 많아지는 경우 동일하게 해당 랭킹 서비스의 요청도 많아지게 됩니다. 결국 랭킹 서비스의 요청이 많아진다는 것은 그만큼 위에 적힌 긴 쿼리들의 요청도 많아지게되고 결국 성능에 저하가 생기게 됩니다. 주된 성능 저하로 COUNT 연산을 해야하고, 조회된 사용자들이 많아지면 많아질수록 테이블의 데이터가 많아지게되는데 위 쿼리는 풀테이블 스캔을 하기 때문에 주된 성능 저하로 볼 수 있겠습니다.</p>\n<p>저는 이것을 <strong>Redis의 SortedSet</strong>을 활용한다면 데이터베이스의 부하를 줄일 수 있다고 생각했습니다.</p>\n<h2>1.2 랭킹 서비스 개선 후 플로우</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/51f47/image-19.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACjUlEQVR42o1T20/TYBTvf+STiVxMgMllFC9sjLGJyjZwl3JRIYIOFh0scQKGKLdJGCIOYUQHMSYE5AkTA2/yQEiUPUDatR2TDGq3dm3naWt0BGM4PTnp+b7++jvn950Pwbr8JrtbW9eKmtqq6u+i5rZLNa4zOmK709vQ8ugG5ql39kA0O9ylBuys4KJr9qJqe4nOodE7i6sdJTpnWW1zWS2mxP95qcGF5P4JODU1rgLUVog25WktuZ6PWvMrrbkrwHQCDOQVxhb/SHD4zXQwtBicjQRDsk+GImOvwoHXC7AyGXo/9XYRUl1Dx18wVJKPWp4+n2E4+svuUjableBRjEunYtHv8RiupoIgQpxfXD4Bzqu0jk6Fs5LIHB7DF6IoibJJOEHsbG/je3upVFqSsjwvAHh5bR1RW1UVvqC1DAfnYAMAisloSKPR6NetrR+Hh6KSqszLa5+RYp3DbHebHd0GWxfgx6bDDJOkKTpOUeT+Pp1ICKJ0EI/jOJ5MJgVBOAGGQ6pt7NJb7mtNrYWXG1VmjuMyQobjeGJzI0VTLMfFEwmWZdNpjuf5TCYjgz+tI6B43e2H153d1Q0doPb49AJsxGIkRVLHLPttfJTc3GQ4jt7dZRiGpA+Ojn8C/nfPwFxj6zQ2Pbh6sx1a6HkyokoqyUqLyaNkRikVVFQWRSkrqmVPzUaQPyesDhnEds+g79mEt3/MMzTjG53zD014BwKPBwLe/nF4Ae8bfOn2vagwYsjpiYXOz5ff0hqxwPzq6sYOjhP29r5zxaaCKltepUVxKwycRu/6B7jc2FyidxpsnSRB8CwDFQInAEDR3NmWL8ZpcKnShbauJby08u7DytLH1aZ7vRevNJ6+bb8AC14d1UQTEzMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='개선 후 랭킹 서비스' title='' src='/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/ca1dc/image-19.png' srcset='/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/e7570/image-19.png 170w,\n/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/f46e7/image-19.png 340w,\n/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/ca1dc/image-19.png 680w,\n/dev-blog/static/4e1fd1d17ff54f7a65978b72c077a098/51f47/image-19.png 892w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>개선 후 랭킹 서비스</figcaption>\n  </figure></p>\n<p>이 구성은 개선 후의 랭킹 조회 서비스이며 플로우는 아래와 같습니다.</p>\n<ol>\n<li>클라이언트가 캐릭터를 조회를 합니다.</li>\n<li>\n<p>외부 API로 받아온 유저 정보를 Redis에 <strong>SortedSet</strong> 형태로 저장합니다. </p>\n<ul>\n<li>이때 <strong>Key는 게임의 이름</strong>이 되고 안에 들어가는 <strong>Value는 조회된 유저의 정보 객체인 CharacterInfo</strong> 그리고 마지막 <strong>Score는 유저의 조회 횟수</strong> 입니다.</li>\n<li>SortedSet 자료구조는 Redis에서 지원하는 정렬된 집합이라고 볼 수 있습니다.</li>\n</ul>\n</li>\n<li>클라이언트가 랭킹을 조회합니다.</li>\n<li>SpringBoot 서버에서 SortedSet 형태로 저장된 Redis의 데이터를 1위부터 5위까지 가져옵니다.</li>\n<li>클라이언트에게 해당 데이터를 전달합니다.</li>\n<li>일일 랭킹이기 때문에 자정이 되면 Spring Scheduler에 의해서 Redis에 있는 랭킹 데이터가 삭제됩니다.</li>\n</ol>\n<h3>랭킹 서비스 개선 후 얻을 수 있는 장점</h3>\n<p>우선 랭킹을 조회하기 위해 DB에 쿼리를 날리지 않아도 되는 것이 가장 큰 장점입니다. Redis에 저장할 때마다 SortedSet을 이용하여 Value의 Score을 기반으로 자동 정렬이 되고, 이것을 랭킹처럼 사용할 수 있습니다. 물론 Redis라는 관리포인트가 하나 더 생기는 것이지만 DB의 조회를 없애고 조회에 있어서 성능적으로 간편하게 조회가 가능합니다.</p>\n<h2>2. 랭킹 서비스 구현하기</h2>\n<h2>2.1 Synology NAS로 Redis서버 구축하기</h2>\n<ol>\n<li>Container Manager에서 Redis 검색 후 클릭\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/768fbb79efe636c686c06beff65db3c9/fcbeb/image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 37.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFklEQVR42n2Si3KFIAxE/f/f7K2dVjEIiMhru/iYXvtiZg0wyWGTsbPOwXuPWityqUin/lstd89fFiRjUciIjGEa0a1bRGZ90zwovL70kPcB2a8s8D9lHUpMO3ibZ6wiKAQX5tuPAZ0YvtKATFjGEarv4cc3Jhskaw+ZMxKWeF9TQr1b3sMoFp3TLFwDctjg6UCJhrWCEPgqW2+6Wrx03OEU9+1M4KQJfDwGTMrBygJPBw0oWsMZhZQyci57TPnYZ8ZEh3codqB2AV2gu2t5zmGaBHq2MEaQYvhy8eTs6vK75mVDV2u9ARWBwjEsThBjpNJNpZRfYEfLpjl8nq1fV4xK6E4jbscMW4sN0tpt8Y8faf8OJuAT1kty3AQMjMsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='레지스트리' title='' src='/dev-blog/static/768fbb79efe636c686c06beff65db3c9/ca1dc/image.png' srcset='/dev-blog/static/768fbb79efe636c686c06beff65db3c9/e7570/image.png 170w,\n/dev-blog/static/768fbb79efe636c686c06beff65db3c9/f46e7/image.png 340w,\n/dev-blog/static/768fbb79efe636c686c06beff65db3c9/ca1dc/image.png 680w,\n/dev-blog/static/768fbb79efe636c686c06beff65db3c9/02d09/image.png 1020w,\n/dev-blog/static/768fbb79efe636c686c06beff65db3c9/fcbeb/image.png 1206w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>레지스트리</figcaption>\n  </figure></li>\n<li>Redis 이미지 클릭\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/568e1b881f38b12526185e7e861f40fc/78ab2/image-1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 35.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABVElEQVR42jVRy27DMAzL///Ybttl2A7F2m1t00eSxolt+W2OTjEDgpiYomipe3l9xzA9MDK0MVjGCTOxWg1DY15WWDFwjuEtcvKoOaBs4ZGiR0kBMToEL+gOhx/kUlDxPKJWCiosRmDEY2UelcZiiSUgkZty3vilVjZzFMsopaLyu9vt9lgWgxgSckyIuSKQYK3A+7CRrAuYpUACiyjo2KhkmqCIDwFC0RAiuUD3+faBoZ/wuCnoQSElFvqIaVYUjpvAtFhc1gLl2ksqR2M3d82ldR6LNszuKfi1/34SWNhOYudAR4lEtFHQtSdurjMD7V4ENT1x5J1jfaDL1qE7nvoNtKe1o2ZBf+aS7pwj8TxqXC4zzleD252Lehj0p4FzbpjOzyOOvzdcmbXx6G73YRP6F/Q+Qa8C4TIisecixDgkjiEygoswq93+N2y1YOXSWm7L+QNphx5XcpLEhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='이미지' title='' src='/dev-blog/static/568e1b881f38b12526185e7e861f40fc/ca1dc/image-1.png' srcset='/dev-blog/static/568e1b881f38b12526185e7e861f40fc/e7570/image-1.png 170w,\n/dev-blog/static/568e1b881f38b12526185e7e861f40fc/f46e7/image-1.png 340w,\n/dev-blog/static/568e1b881f38b12526185e7e861f40fc/ca1dc/image-1.png 680w,\n/dev-blog/static/568e1b881f38b12526185e7e861f40fc/02d09/image-1.png 1020w,\n/dev-blog/static/568e1b881f38b12526185e7e861f40fc/78ab2/image-1.png 1201w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>이미지</figcaption>\n  </figure></li>\n<li>\n<p>Redis 설정</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/660ed/image-2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 77.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVR42q2Ru4oUQRSGC0HEzdxQfRYfwMTcyMBZQTYUL5i4qIEubCgYmBnOosI8iJmB4H17eqa7uruq+lq331PTs0uPuLOMeOCjq7pO/ef8p9jlFxyXnqe4us9x5WWKrb0EFzdka2+O8084rr/+Crb9LMU2CV54nIDdn4M9GPAwkJzJuUeUd4/j2sFnsN1Jid2Jwp0PEqP3S94J7BwWGB3muD3OMBrna9mhnFtjiaeTb2BWd3DWYiWqEkZwGJkBugK69fjwVQWS6RRMyBIFUVY1vAcc6VkhkecCaZqjKCS61sBoCz3ADNDG0R2FeRSBGWOhFImSSMA4kmxbmEIQBTRhpYRT6lTCOUgjiWMwaooqanRdR5XMiWtt3YJaU3UX8LS3CPk+WBnE8T6azkiQNi2JBSwJuGVuYzxUsEoOHP30RFk1kGWNqm6wmM8SH1xRxDMSDNWF7O3yLEeuyK7tu1rtY9gS/tphmqZgji6GGQqpkNPcwlfRXDJZoaUuw3mw2tvux+BPEeScg4WFJVuWLjnvThIKUSET9FiqgqpaNGS/bjQkrZ3z6wX/OCVhElQNeFEuBM6K9YKbRHgQ349lIRhmiP8QKx36ZZVNCU9dly1+RhJHscRsXmE+jf+tw+M3+fgpwY1XP3DzzS/cfXuE6Mt3/AakF5jIS/4qrgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='일반 설정' title='' src='/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/ca1dc/image-2.png' srcset='/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/e7570/image-2.png 170w,\n/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/f46e7/image-2.png 340w,\n/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/ca1dc/image-2.png 680w,\n/dev-blog/static/c98e0a6a4bfccd1ccc085f9218cb1efc/660ed/image-2.png 741w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>일반 설정</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/134e0/image-10.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 77.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVR42p1SO27VQBQ1DeHTQUk2wAZYCCUNK0AUEQQJKBKJBjo2gUSBxHcjVHSB5+Thv+fj8Xg89uHMvDwSUBJIRjqa4+u5536TzZcVbrwosfmqwi3y67sFruwUuHoOXCM2dirceb1AsvG8wE0KXn5aIHmcI9k+Py5tZ0gelbi9+w3J1meJJ18Etj61ePjhomjw4KPCs/d7SCBaDF0PqzvMvgcmS/Qnw5s/+SHmifegUe2zZJmXWFYCeS3RSI2ykSjbFa+EQi00hDbRFm7B4JF3Brq3aFWHhoAbcbD3A4nKSmRlg6ZVyKs28qxsIek8DANGPgxwh7e1A+0ucj/6eJt+YNI9ijRFIooGi1JBuwkODDQze8JYBzsECzDj6PQMMs1ztEWQG4qGtsmcg+2WOZaLDIqZTeyjVzpi7lgGMWv9F06whbdSoi0oODqPXDjU0sEzErzHNLIcZudDNs5FzLSdhvCfqUIIgcTSqWo4lLLmICTqVhCSPewglIKQRMh6mnDaCWWHEwUNm5z+LHGQU1AZpFnF74r9G38/Xjv8l6AnV8OMs12OO/9DcGAPa2k5essZmLgWPXlvLVeF6zGOR47HBNYIE1+3YyXIHgZiDMfOXhkThFe8blpCrAJwz0K/OwY8u2Sqh31blxLugJCZoUgIEKCZfR+yZ2+Djxsd92/C98Zj0Y7Yl3McaIILHNlZVHWDr0uLu28k7r0VuP9OIy0EfgETyZOVpOjrywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='고급 설정' title='' src='/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/ca1dc/image-10.png' srcset='/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/e7570/image-10.png 170w,\n/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/f46e7/image-10.png 340w,\n/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/ca1dc/image-10.png 680w,\n/dev-blog/static/ecfd5b1908bdbf7eb5446d92cbcde8ff/134e0/image-10.png 744w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>고급 설정</figcaption>\n  </figure></p>\n<ul>\n<li>포트는 첫번째가 외부이고, 두번째는 컨테이너 내부입니다.</li>\n<li>컨테이너 내부에서는 6379 기본 포트로 동작하고 외부에서 접근할 때는 7000으로 변경하겠습니다.</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 453px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/8504343fb9c9a28bea221ccdc0f4cb48/dac06/image-11.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 106.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGElEQVR42oVV23aiQBDk/z8pH5Dk7CYqgqBy8S4IysW7gNZWj+K6Jif70GeGHqbo6q5uNN0fwR7PEIUB+v0+fN+H4zjo9XoYDAbKPM/DcDhEmqZYLpeYTqeYz+cIguCLac50Dn8eIl2tFNhkMsF4PFb72WyGMAzpm6p1t9ths9movQCveOfZtGQZYzwa4nQqGI2P7XaLPM+xShJczmeUZYmqOtMqFEVBO9FX3PYF751wPB7vpu33e+TrNbI0Q5Zlak0JltCE4nq9UfuMezlPs+u52tMndx9BtShawLItmKYJo22gz/xJzkajEWkPmKvgmsPBEI7rKN9wOFKpcT0X8yBU0QuYAGtZlmLGBEdRjICFERpnUpVV6NbrsxVFeT8XoNq0a5IXWNCWy5UqRJKkwOWC0/H0z8t/c1X7jvfI7oBxFEFvt2ktWM0WzJcX9F/f4L6+YuO6KBjF6enST6aJFJK6CJTCmnpLKJnQ7mJPeZyeKP0XMM8zpTtJvGjvQDolc1hdzl/AanrHHyLW4jiCRyDX6SNgRcuHZF8LUtx9Jat5XcufKG+ptTVy6ipf55DnOI6VuMUvRatbTvyiv9VqicPh8D2g6LDT6UBv6dSjjSG7RqceRWcB5STPoknX8RQT6WPp881mi+Ib+tqakcyk2SnQkM29WETYbXdKNudby4kuz1wvN588Vzc9qpb8osPFgqAzTAgsOhyNxgReqGJJdHP6xozY9z1+NIRHOcn7MnGkmBv2fy1wRVnGlWixreuk00e32+WLLn79+g2L6Wg0GmjpbRhGGzbl9P7+ho/PBiLmNKKOZR7cAVdMtm2xlzsWwbpqJhqmoSIzDF19TKKTISFs1AC5FbB4qPi9lw+HvRpZu91ezTvZ7+mTy1eAXK1SVblUVde8PUpLWVnWOowVRZtmMdIWq62T+sfnB7qsZpcUTbODT1K0LBsxGUkziKzk4ypa7sUU4JID1jRMNJtN0nUwYSFcJlpyKKvkSHw9nrkshoDKIJaz4DbaZJVfhAxpTQanaE6kk3K4VmX1NKaKb0eYjK9nv0T4B/A2MRhN8skkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='redis.conf' title='' src='/dev-blog/static/8504343fb9c9a28bea221ccdc0f4cb48/dac06/image-11.png' srcset='/dev-blog/static/8504343fb9c9a28bea221ccdc0f4cb48/e7570/image-11.png 170w,\n/dev-blog/static/8504343fb9c9a28bea221ccdc0f4cb48/f46e7/image-11.png 340w,\n/dev-blog/static/8504343fb9c9a28bea221ccdc0f4cb48/dac06/image-11.png 453w' sizes='(max-width: 453px) 100vw, 453px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>redis.conf</figcaption>\n  </figure></p>\n<ul>\n<li>그리고 Redis에 대한 설정 파일을 미리 만들어서 넣어주도록 하겠습니다.</li>\n<li>기본적으로 Redis는 패스워드가 없기 때문에 패스워드를 설정해줍니다.</li>\n<li>\n<p>그 외 설정은 Redis의 파일 백업 방식을 설정하거나 꽉 찼을 때 메모리 용량을 제거할 수 있는 방법에 대한 설정입니다.</p>\n<ul>\n<li>저는 조회가 많아지면 메모리의 양이 늘어날 수 있다고 생각하여 maxmemory에 대한 policy를 설정하여 제한 메모리까지 찼을 때 비워줄 수 있도록 했습니다.</li>\n<li>또한 스냅샷 방식을 통해 파일로 저장하고 껐다켜지더라도 복구가될 수 있도록 설정했습니다.</li>\n</ul>\n</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/f5f2a/image-12.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 71.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmElEQVR42p1TSW4bMRDU93LOK/yh3Iy8JW8wEMRLEimWRjMmORt3DslKk7JkwQdbUAOFHg6axept5UNAWBa8t3whjpZyrjwr4xeIUUEaD+0j1rsOgzRIKSFoDdCD2fuK5BwWY4Czs5MS0Vpkii93Vj4saFmPF95DagsxzNAuwCuD9n6NzeMWzZ8GoqGYZ4bNwz88P23Btryef//8i82vNdhOQAZglUkqYxz7toN1vspfYoQzFp6UqknBkHfawSpbcTwXlG89K1j6DokIC4En+cM4QVM6pS6B0iz/rrFK6KgWTfuCcZIHhVTcE2FOn3Qmv+KMsFyephmWilssUspF5VUKNU3MfnDYcgVy4CZhIJQxuIow0j1pHHYdB+8lOj5iog5fazXlhdLrRQ/RD5hneRrsSy2fZXOqYdsxNPsO6lVdvjDlY1g+b0rwAZwUFoSwvAVcsHPl4eP6lmYeFNJAM34gVErXoJQ+RowJkbwZJUTL0HeCpsQdCOty0x6WFyL5z9KztP8NGyBmi5vvG3y97fDlW4Mfdz3+A77bR4VUyD/8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='NAS 공유폴더' title='' src='/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/ca1dc/image-12.png' srcset='/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/e7570/image-12.png 170w,\n/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/f46e7/image-12.png 340w,\n/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/ca1dc/image-12.png 680w,\n/dev-blog/static/c57edbc862553d19dc1952fcc4d69dd5/f5f2a/image-12.png 695w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>NAS 공유폴더</figcaption>\n  </figure></p>\n<ul>\n<li>NAS 서버의 공유 폴더에 해당 config 파일을 넣어주고</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/bf436/image-13.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 77.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACU0lEQVR42p1UPW8UMRBdutQEREEbSv4Fv4APRTTQU1ASKoQESYEENf/gCBIlf4MaiQIEdwe3tx/2rr173rX9eOO7hCQgQFnp3djjndmZ98aX7bxa4uqLHDsvc1zj+spBju39HJc2uPhscbw+6Tvpvyy+50vceP0V2dbTAtsHBbaeLJE9ztfY+wfOvHdhb4HsUYHr+x+R7R42uP9O4+5bjVsTjdvnwJ2Jws03Bg8mn5BFAHaIMA6IsjnHEzeB8/kcme1WmOclFqVCrRsUZY2yUlC6TftatWhag6rWtBatsShrhYbWdj1U00IT8kynTLhaOZRlhZZBtdIMZDJaYzvI2TCMGEdPO9COcPS5tPbw3qfzrl+lhLP5d2QDnQWrGXw41YZzA1ZEaum4NaB3DoGLuPHLyvQuxWulkPVVjcW3OdplicgqA8sXRGMIm3yn8CcfAWtR5ZyU0fbITUDVjghSZQiIAi/w/4UQPFsaUE5n5JDZlekSf0K+MWviBXpDuPh9CMeKxjPjkHbktJCEnoTWDCrYesmkBRU2rLojL5WIRNTk2JF8CWx5ZhkTuBF4/jQdheK0pAp7JpjOfhALVJWm9Ot1z6ojBfBUNRBRBKK64ovDep0gIont+3XCwPEwNYnml8XJzyNyvpDQJUQrsL8hEJ7UBAoo76uqROak99alcZBWpDUZF9k7mTue/xqRv9+UkrRlA4M6VmFZRdO2yRp+WazcBBnaIyGOMHICZLCtC/hcjfhSj5g1EcuCFZ7n7mpLIXmjPkwddg817vHP5eF7i7xU+AlaQZBeBDTVZgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='볼륨 연결 설정' title='' src='/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/ca1dc/image-13.png' srcset='/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/e7570/image-13.png 170w,\n/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/f46e7/image-13.png 340w,\n/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/ca1dc/image-13.png 680w,\n/dev-blog/static/2152069ff86e678abf2e2202e9cc3eea/bf436/image-13.png 745w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>볼륨 연결 설정</figcaption>\n  </figure></p>\n<ul>\n<li>해당 공유 폴더와 컨테이너의 볼륨을 연결하여 사용할 수 있도록 합니다.</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/e6e18927194a1dc14500e183669ede93/04883/image-9.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVR42pVUy47TQBD0B8AJcUCLED8FHwQSiGVvfAE3xJdw4wZH2Gg3mxDH9tjj8WOmp6geO2ETWJQdqex59HRXV7ednZ1v8exii6fvczy/yPHkXY6z8xyP3+Z48GqDh6/zk/HoTY5sUQl+loJvqwHf10OaL0zEpYJnl/P5qcjAMXpB2Xr0PgAxIAoRPKDvKLjPyCQCdWPR2AZt62DqBobrsqqRF1Wa0wRqF/g4hu7fRmJoTA3btkexYnLuuh4hCLxXtnGPEAJE/maf6WHHS63rkuFuBBorcw1kbcsM7MH5nSnPZGbEPYQMqpIp13WSou97aisHNvhHgCzSWEwDbyxCTRbNBE8ZXL6dsC0QyXR3lkDWwoBxGI4c8mI/CDYNGbmJwU6niQWO1n+YiZJxbk4uzlVmSip+rRFviayFqKxDRTYVmVvXT5VWOTSAOumoO/Xfl5H7mRiDuighpB69T2BJMQ4jrhdrXC1z3GwM5yssL29w/WOJomSQLmCgVKzo3qHnvQx05Cr2Ycm2If0E1YtVFTIXMhRlr3PKEwhpONeqcw/6MRw45Kg1NW0NOjM0tmwhOaFFpoafJeBiHGeH603BtIq0oVG0aWdRplu763e0ygFDFbKno27we1a7qv0PwzgFXtvAH0hIP5FfzczwvkPjrrba8BYfvji8/Gzw4pPBx689fgPSXse7azKCUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='실행 명령 설정' title='' src='/dev-blog/static/e6e18927194a1dc14500e183669ede93/ca1dc/image-9.png' srcset='/dev-blog/static/e6e18927194a1dc14500e183669ede93/e7570/image-9.png 170w,\n/dev-blog/static/e6e18927194a1dc14500e183669ede93/f46e7/image-9.png 340w,\n/dev-blog/static/e6e18927194a1dc14500e183669ede93/ca1dc/image-9.png 680w,\n/dev-blog/static/e6e18927194a1dc14500e183669ede93/04883/image-9.png 737w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>실행 명령 설정</figcaption>\n  </figure></p>\n<ul>\n<li>컨테이너를 실행할 때 해당하는 config 파일을 토대로 실행할 수 있도록 합니다.</li>\n<li>이때 실행 명령은 설정 후 변경할 수 없으므로 꼭 해주고 가야합니다.</li>\n</ul>\n</li>\n<li>\n<p>설정된 Redis 컨테이너 실행</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/c2a07/image-4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVR42l1R2W7DMAzz///iHjasxYB1Ser4vjnKabpDCO1YtGSJUi+vF7y+veNy/cCybLgtK25fK74Et2XuZt/RsiXMsRd77Inn4uZ/fUCllHDaIEzIsISLBcYn5NoObhy8oHNpXM6zIOUyfepz0Yi5gR9q7djXBWHb4Fhdut/RnUO+a4R1xfB+ou4GWevJDU9e7/O++NV1cdh8xxoGQh5I7o5sDAxbDQxCjCjGwlKKsJFj0KBvBEEgHybv1oNTxlKL1p9t+xYRS8JuHHbLanpHqRWaQcZ5WB9RW3u2KpbJCxdThtLMWuk4LVQmzBlaGzheEu1KqXzAIjGgUyfB1PSRUXjLx2UeKsafoZwJcylMFrjXWUXlYKx1M/A5oP8JnZ8PqnF6HybtpUeFG4fhfZgBmsJnTlLsd4UCkUzuiBQK/yz3zKQFgaIfgWNWKO2Xelb4t4jGRNKp8N/wfb7MPEV1nQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='컨테이너 실행' title='' src='/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/ca1dc/image-4.png' srcset='/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/e7570/image-4.png 170w,\n/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/f46e7/image-4.png 340w,\n/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/ca1dc/image-4.png 680w,\n/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/02d09/image-4.png 1020w,\n/dev-blog/static/c7679283ab71b52f7456d948d0b069e0/c2a07/image-4.png 1053w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>컨테이너 실행</figcaption>\n  </figure></p>\n<ul>\n<li>만들어진 컨테이너를 실행시킵니다.</li>\n</ul>\n</li>\n<li>\n<p>컨테이너 접속하여 외부 접근을 위한 설정 진행\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/f3e6b/image-5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 27.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVR42o1Qy04DMQzMp/KR3PgB/qFwgQOoqrRJ1onz8g6T3bbi0EMtjewk47En7vfiEeMKkYRaGzzrJUQE5lIqRm+wMdFh1o/a+h1FM6Qa5PSG9voCNwUkK2bYBixroliEpIxnoveBIIqaPZaPd7hLVJxjgVeDNkMfA4MwqpvZnjnnIWw73mqlE+Z0/oHL3C5ruU+UnJF4N4lz02ldab2wafIO6H7ebj2evKDwnye4VQT5annGTqYAroKe/5l4V1vD4Mb/cRNcl0CQ+/2FP8YOhbbMN4/nAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='컨테이너 접속' title='' src='/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/ca1dc/image-5.png' srcset='/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/e7570/image-5.png 170w,\n/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/f46e7/image-5.png 340w,\n/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/ca1dc/image-5.png 680w,\n/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/02d09/image-5.png 1020w,\n/dev-blog/static/efdce980e01515c43817a6ec1c5c20b6/f3e6b/image-5.png 1288w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>컨테이너 접속</figcaption>\n  </figure></p>\n<ul>\n<li>\n<p>터미널을 열어서 아래 명령어들을 입력합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">apt-get</span> update\n<span class=\"token function\">apt-get</span> upgrade\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> openssh-server <span class=\"token parameter variable\">-y</span> <span class=\"token comment\"># ssh server 설치</span>\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">vim</span> <span class=\"token parameter variable\">-y</span> <span class=\"token comment\"># vi 편집기 설치</span>\n<span class=\"token function\">passwd</span> <span class=\"token comment\"># ssh로 접근하기 위한 루트 사용자에 대한 비밀번호 설정</span>\n<span class=\"token function\">vi</span> /etc/ssh/sshd_config <span class=\"token comment\"># 루트 접근 허용을 위한 설정</span></code></pre></div>\n</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/30688117b4f7de94e4bc403309753418/b5dc4/image-6.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 61.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVR42qWSX0+CUBjG+Sxe6FUC53BAQP6oaavu+hhOL+3LtvVHQaiWqzRFSZ5eKG+a5Rxn+42N7f3xvM9B+liukKw3WG9SJMSGyLIMx558ZLvdQlosE8zeF4ieXzB7mxc8BCHiOEIUTYnoII9xjJvbO0zCGNIqzRA+vSKezbFMUbzsXV6h2TqD1+7B9VpwXecHdy++74NzjtH1CNLmM8N8tUaSbovo9+MARrONE25B0UzITEBWGKFCluW9MMZQqVTQ7/ch7TrI98/PhNa1W+dQdRua6YGb9PX8abXBRaNI8htd11Gr1TAcDr+Fu0IL4SSA5XYoHQ0bNpiwwGgoT/EXQghUq1UMBoM9CXOh14Mi7CIR4/q/soPCMQkNp4M6daiSUGW8nHBKwguPbk4XaBkmLK6RtIQwDAJ0/VPYhgWnYcGgAbXsyg2vi7qWr2xC1ahDSlniUiZwHAeKohS/BDuywy8QUlTACbPIvwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='/etc/ssh/sshd_config' title='' src='/dev-blog/static/30688117b4f7de94e4bc403309753418/ca1dc/image-6.png' srcset='/dev-blog/static/30688117b4f7de94e4bc403309753418/e7570/image-6.png 170w,\n/dev-blog/static/30688117b4f7de94e4bc403309753418/f46e7/image-6.png 340w,\n/dev-blog/static/30688117b4f7de94e4bc403309753418/ca1dc/image-6.png 680w,\n/dev-blog/static/30688117b4f7de94e4bc403309753418/b5dc4/image-6.png 915w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>/etc/ssh/sshd_config</figcaption>\n  </figure></p>\n<ul>\n<li>PermitRootLogin의 주석을 해제하고 yes로 변경</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">vi</span> ~/.bashrc <span class=\"token comment\"># 서버 실행시 시작 명령어 모음</span>\n<span class=\"token builtin class-name\">source</span> ~/.bashrc <span class=\"token comment\"># 바로 적용</span></code></pre></div>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/d342100de181ffa131e7b446df7edb41/c6456/image-14.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 44.705882352941174%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42p2Q706CUByGuRO/OZcLPYdzOGCWq602/ZiTzAuxLb0Iu8Yy/5ShKYEKvP0Ua9SytdiePWcMnr2geW8+guUKYRQhDCNE5P9e6zCE5vkB5p6PiTuD+7ogPMzmCyyXSwRB8Cc2zz6/TDGl9zV/FeFh5KI/djEPQgzHT2g0W7hsNFF3WqhftRI710Qz8eZew/mk4Tio1mro9e6gBesIk5mHub9GSLPv+wPoooyDoo180dyhkGcqOTOLLJA/LBD6Fl3Xkclk0G7fQPv4/jiOtx4MhlClCgzzCEIRprWjBCEVYSUWkmxuUcpCLpdDt9uFFu9iUSooS6dg6gTcPgO3KuAU40KBGyKFsbOENBWy2SxuO52fF0q7AiZtcFVOghtznoKlzCCl2B98pKBBwYJZBtssowVcmMlCYSWrvsQ5BeX+4IiCVfqH5/YxLkwBizGwb4Hfgu9yHdiGjefDYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='bashrc' title='' src='/dev-blog/static/d342100de181ffa131e7b446df7edb41/ca1dc/image-14.png' srcset='/dev-blog/static/d342100de181ffa131e7b446df7edb41/e7570/image-14.png 170w,\n/dev-blog/static/d342100de181ffa131e7b446df7edb41/f46e7/image-14.png 340w,\n/dev-blog/static/d342100de181ffa131e7b446df7edb41/ca1dc/image-14.png 680w,\n/dev-blog/static/d342100de181ffa131e7b446df7edb41/c6456/image-14.png 925w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>bashrc</figcaption>\n  </figure></p>\n<ul>\n<li>컨테이너 시작시 SSH 실행되게 하기 위하여 bashrc에 설정 후 적용</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">service</span> <span class=\"token function\">ssh</span> restart <span class=\"token comment\"># ssh 서비스 재실행</span></code></pre></div>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/309ad/image-8.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 65.88235294117646%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVR42o1T2W7DIBD0//enKvU3oj6lUqU0sTGwHAams8SOcvTISqNgBMPM7mTY7T9xPI2YjEEIEV4E1vmOEAJqyf8ixwDvHUQcBmtnpJSwlZB0nGYSCvJS8EylvMD6iJAWDB8Hg/2XxSgVNlVEbsacsZRKNLT2HLRaqxiM9fAhgfdRuR9i5msBpZR+UNsQY7pcrHe4Js0UMkxmhpkt1kc6kffCNmS01Y6iqGK2oNb6q/VloWWRs5qtzoRUzX21nS+2a1efeelPwuXuQKEC4XSV0PPXsh1K/Ew9ElJFZE/N6FAZn0J4tiRa19cbqsZpW1PA1gZ1cktIu8LIOA4lUKGwl55kgReFMfLMpiJxUI7fMk5chx61ZY3YA6HTgHMg3QKt6kD0fUXU4TAKOixhvDJJcTek4abJlGzHGRMtMwMEA58imSKagmratt6+2SaNW39ILW+Ea2o4iIjDyfQoGWO7baHNwnONau5xXY89ZAX9H5PIcTiW6AHWyz9MVVUF8Xh9j3h589gdC74BLXv9o4X3rLEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='포트 설정' title='' src='/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/ca1dc/image-8.png' srcset='/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/e7570/image-8.png 170w,\n/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/f46e7/image-8.png 340w,\n/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/ca1dc/image-8.png 680w,\n/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/02d09/image-8.png 1020w,\n/dev-blog/static/d9ff482a0940e93d079c654b059b67a5/309ad/image-8.png 1198w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>포트 설정</figcaption>\n  </figure></p>\n<ul>\n<li>외부에서 해당 컨테이너로 접속이 가능하도록 포트 설정</li>\n<li>실제로 외부에서 접속하기 위해서는 공유기 포트포워딩도 필요함</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 677px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/e38a6f81be1117dc4cde347b681706a4/3c503/image-3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 47.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqklEQVR42qWRW24TMRRAZwuREikSSTZQCEpRK+UPSEq3UJbRj+4GCaGkf0jdCPCTQiHJ9JHHTCfz8NjzShoyB09KkfqFBLaOrm3Z594rG5OrS6y5xXwyRQQhkYoJdZShIhQKKSSBJ/TZPcIPiKOEZbYkS7NtXKVL7rJ7jNHNDFtfmsiUeHGLcixcIbRYkIYXzBcuU2vGyImxgoggWBJGUhOyEHodrwjUCtO/Y+yvMeb2Lb6uopCkOnMkJULpSvWjRLksPAfzashwZDIajxkMLvh6PuDL50+Y11PiZIlKMmS2RqRaGHgWoTfVVfo4gYmKJbGIsPyEs49nnBwf8/rVSw4ODul2urTbbfb292k2mxwdveXd+w/0ej36/T6nGsO1v+HbJr7OshDfCaSL9BTDmaT75lA/fEar1eLpzg7PtWR39wXVanVLpVKhVCo9wvBurnF0u17gU4yfmw25npvNmk6nQ7lcpl6vU6vVeKIpYrF/oNFoPMKwvIxQzbHsS/JNocy34jzP/wiLi7Xfsr9hJM5Af33G8McQKRUP45+FuTjftmjZDq7n/bfwF3na+LNPxPboAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='MobaXterm 접속 화면-1' title='' src='/dev-blog/static/e38a6f81be1117dc4cde347b681706a4/3c503/image-3.png' srcset='/dev-blog/static/e38a6f81be1117dc4cde347b681706a4/e7570/image-3.png 170w,\n/dev-blog/static/e38a6f81be1117dc4cde347b681706a4/f46e7/image-3.png 340w,\n/dev-blog/static/e38a6f81be1117dc4cde347b681706a4/3c503/image-3.png 677w' sizes='(max-width: 677px) 100vw, 677px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>MobaXterm 접속 화면-1</figcaption>\n  </figure>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 661px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/c85f9f1b1d94f265e4f3bffde753062a/4128c/image-15.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 50.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACH0lEQVR42o2S3U4TQRiG9w4ICRxAW0FCaIVCKLEtXoGKxQODWGJNvCRj4n2YGK9AK0EPTPzBokbotl3aWbo7+1fa7c/jsCISD4xf8uzObmaefO/MaF8/72PUWjSOGkjLw3e7eHag6ODKUzwZRN++5ePb52P1PwwG9PyQXhDSV4SKQSdE+3KoY9oSXS10zRbecR3TspHSpiP3aTSbHOpVKobNkbAxTQ9LOliehe32kF4XS4ktv8+HVh/tUK9FE4TtELiu6qJNW8kcV+I7daRjK2kd3WhSaxxTVUka9ToH+5+oG0Kt9Wi7Kk3QQ7e6aNaJqaIKjkWLtm0QdFQ018dS0d/uvuPZ0ydsbd1jp7hD8UGRQqEQcfPWbYrFIs9fvKRcfs2bcpm93TKaaLxHih+IIKBpf1TdmbjCoVLz2b67TTqRJH99nWw2Sy6XZym9xMLCAnNzc8TjCaamppiYmFBMRmgn+lEUV6p9HA5G9PuDCEZDSvdLJCevks/8EubzebK5HOvrN1hdXSWVSjE/P08ikbhAa4mzDTawHMFZjUYj9YiGlB4+JnklRSadYXllmWuLi8zOzhKbniYWizF9/o7H4xdodtvAVyf2/dsBndPuH6mqR1slUvEka8trZDIZ0umVSHJZ8Dca4hX+aUilckC1WiXshfyujTsbjI2NkVATY7F/iy6E/eGQoWpICBNL3b/LHW4WNhkfH2dmZua/ZGfCn7bGLxp5untuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='MobaXterm 접속 화면-2' title='' src='/dev-blog/static/c85f9f1b1d94f265e4f3bffde753062a/4128c/image-15.png' srcset='/dev-blog/static/c85f9f1b1d94f265e4f3bffde753062a/e7570/image-15.png 170w,\n/dev-blog/static/c85f9f1b1d94f265e4f3bffde753062a/f46e7/image-15.png 340w,\n/dev-blog/static/c85f9f1b1d94f265e4f3bffde753062a/4128c/image-15.png 661w' sizes='(max-width: 661px) 100vw, 661px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>MobaXterm 접속 화면-2</figcaption>\n  </figure></p>\n<ul>\n<li>MobaXterm 프로그램을 이용하여 접속시 정상 접근 확인</li>\n</ul>\n</li>\n</ol>\n<h2>2.2 SpringBoot에서 기능 구현하기</h2>\n<ol>\n<li>\n<p>프로젝트에 Redis Dependency 추가</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/9635e0d0009f24b85b8b654c770c7bdb/0f09e/image-16.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 35.29411764705882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABKElEQVR42l2Q227DIBBE8yO+gQEb8C04vrSpKvWhUv//g6ZjcKK0D0ezK2CY3YvRFvdxxjYELN5j66dUU32tYSsJK+qkD4T82593Buoly0q8uQE/75/43u74mjcE22INHba5x76MUdcr+3Dq2R931qmL9XL1CLKmYV6haRzmsGAaAzo/QBmDpreJwcF0Fsa3UK2Btg2MO+omcvS11ihLgaIQp2Hrse4fmG87tHNQI03464MmqkfBsbJcIC9fkZGMZvnDUOkWU7hh4C61pVnvYZhM01h1LSqlUNUKJUcquKfjzX/y/MXQOu6E+7stO2YS5pVJOe7kY7oId2WO5ERwJaIhRqeaIwulk6GUEhVHqaSBrHkoNXuFgmOUMqV6IhJH2pj6eZ70MPwFMT3OSFsBjOcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Redis Dependency 추가' title='' src='/dev-blog/static/9635e0d0009f24b85b8b654c770c7bdb/0f09e/image-16.png' srcset='/dev-blog/static/9635e0d0009f24b85b8b654c770c7bdb/e7570/image-16.png 170w,\n/dev-blog/static/9635e0d0009f24b85b8b654c770c7bdb/f46e7/image-16.png 340w,\n/dev-blog/static/9635e0d0009f24b85b8b654c770c7bdb/0f09e/image-16.png 640w' sizes='(max-width: 640px) 100vw, 640px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Redis Dependency 추가</figcaption>\n  </figure></p>\n</li>\n<li>\n<p>접근을 위한 Property 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>DEV_REDIS_HOST<span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>DEV_REDIS_PASSWORD<span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>DEV_REDIS_PORT<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Property를 읽어오기 위한 설정 진행</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@ConfigurationProperties</span><span class=\"token punctuation\">(</span>prefix <span class=\"token operator\">=</span> <span class=\"token string\">\"spring.data.redis\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisProperties</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> host<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> port<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableConfigurationProperties</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">CorsProperties</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">MapleStoryMProperties</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">KartRiderProperties</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">NexonCommonProperties</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">RedisProperties</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PropertyConfig</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>SpringBoot와 Redis연결 및 데이터 저장 방식 등의 Redis 구성 설정</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">RedisProperties</span> redisProperties<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisConnectionFactory</span> <span class=\"token function\">redisConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">RedisStandaloneConfiguration</span> redisStandaloneConfiguration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisStandaloneConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        redisStandaloneConfiguration<span class=\"token punctuation\">.</span><span class=\"token function\">setHostName</span><span class=\"token punctuation\">(</span>redisProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getHost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        redisStandaloneConfiguration<span class=\"token punctuation\">.</span><span class=\"token function\">setPort</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>redisProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getPort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>redisProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            redisStandaloneConfiguration<span class=\"token punctuation\">.</span><span class=\"token function\">setPassword</span><span class=\"token punctuation\">(</span>redisProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LettuceConnectionFactory</span><span class=\"token punctuation\">(</span>redisStandaloneConfiguration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token function\">redisConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>AWS의 ElastiCache를 이용하게 될 경우 별도의 패스워드 설정 없이 AWS와 연결될 수 있기 때문에 PASSWORD 유무 환경에 따라 유연하게 처리하기 위해 위와 같이 설정했습니다.</li>\n<li>현재 사용되는 Key의 경우 String 형태로만 사용하고 있고, Value는 JSON 형태로 직렬화해서 처리하기 위하여 GenericJackson2JsonRedisSerializer를 사용했습니다.</li>\n</ul>\n</li>\n<li>\n<p>GameRankingRedisRepository 구현</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Repository</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GameRankingRedisRepository</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">INCREMENT_NUMBER</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">RANK_RANGE_MIN</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token constant\">RANK_RANGE_MAX</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ZSetOperations</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> zSetOperations<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@PostConstruct</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        zSetOperations <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForZSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createOrIncrementScore</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">GameType</span> gameType<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterInfo</span> characterInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        zSetOperations<span class=\"token punctuation\">.</span><span class=\"token function\">incrementScore</span><span class=\"token punctuation\">(</span>gameType<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> characterInfo<span class=\"token punctuation\">,</span> <span class=\"token constant\">INCREMENT_NUMBER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CharacterRankingResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findGameCharacterSearchRank</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">GameType</span> gameType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TypedTuple</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> characterRanking <span class=\"token operator\">=</span> zSetOperations<span class=\"token punctuation\">.</span><span class=\"token function\">reverseRangeWithScores</span><span class=\"token punctuation\">(</span>\n                gameType<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RANK_RANGE_MIN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RANK_RANGE_MAX</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> characterRanking<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>character <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterInfo</span> characterInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CharacterInfo</span><span class=\"token punctuation\">)</span>character<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CharacterRankingResponse</span><span class=\"token punctuation\">(</span>\n                            characterInfo<span class=\"token punctuation\">.</span><span class=\"token function\">worldName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                            characterInfo<span class=\"token punctuation\">.</span><span class=\"token function\">characterName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                            character<span class=\"token punctuation\">.</span><span class=\"token function\">getScore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">longValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeRanking</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">GameType</span> gameType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> isDeleted <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>gameType<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GameType: {} -> removed: {}\"</span><span class=\"token punctuation\">,</span> gameType<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> isDeleted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>해당 Class는 Redis에 Ranking 데이터를 저장하고 랭킹을 조회, 삭제하기 위한 Repository입니다.</li>\n<li>createOrIncrementScore 메서드가 동작하면, 사용자가 조회한 캐릭터의 정보가 Redis에 저장되어있는 경우 Score에 +1을 하고 없는 경우 값을 세팅하면서 1로 세팅합니다.</li>\n<li>findGameCharacterSearchRank 메서드는 높은 점수로 부터 상위 5개의 데이터만 가져옵니다.</li>\n<li>removeRanking 메서드는 redis에 있는 Key 값을 삭제하는 메서드이며 00시가 되면 Ranking 관련된 데이터를 삭제하기 위한 로직입니다.</li>\n</ul>\n</li>\n<li>\n<p>Spring Scheduler를 이용한 랭킹 삭제 기능 구현</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Slf4j</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RankSchedulerService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">GameRankingRedisRepository</span> gameRankingRedisRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Scheduled</span><span class=\"token punctuation\">(</span>cron <span class=\"token operator\">=</span> <span class=\"token string\">\"0 0 0 * * *\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeRanking</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RankingRemoveScheduler start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">GameType</span> gameType <span class=\"token operator\">:</span> <span class=\"token class-name\">GameType</span><span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            gameRankingRedisRepository<span class=\"token punctuation\">.</span><span class=\"token function\">removeRanking</span><span class=\"token punctuation\">(</span>gameType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RankingRemoveScheduler end\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>제공하는 랭킹 서비스는 일일 랭킹이므로 Spring Scheduler를 이용하여 00시에 모든 게임에 대한 랭킹 데이터를 삭제하는 클래스를 만들었습니다.</li>\n</ul>\n</li>\n</ol>\n<p>랭킹을 위한 Redis 서버를 구축하고, Spring과 Redis를 연결하여 랭킹 기능을 구현해보았습니다. 구현된 기능들이 정상적으로 동작하는지 확인해보겠습니다.</p>\n<h2>3. 랭킹 서비스 개선 후</h2>\n<h2>3.1 Redis 서버에서 데이터 확인</h2>\n<p>  <figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/b25d8/image-17.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 20.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEElEQVR42i3Pu07CcBiG8d4Ei5MmxNhCOKkVooZdBgcZlJOCk7OLJnJdGqNBB6NXoIPB6KIt0j890AZKy2MFvuSX510/qfvxhaYb2MLCMh0cO6rjYjojPG/C2J8wGoW4XoDlhYT+lGAmXHTOsV3Ghomk/fYxLAtnIDAtE6F/8vL8xF3nkc79A7c317y+vWMIG00MmU58woXAnwsjpjBwfzQkQ+vSEzoDS2doj2mfX7G7oVLM59lRt9jeVNnfK9Gq1WhWKzSjNo4qnFSrtOoNjqN9GvXwoEz74hKp3/uO3hMEQcD/ndVbrCspioUCaiZDPpcjm0ySVhRSazLZRIKULJOOKPE4q8srsy7FYpRLJf4AwRzvOm2WfsoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Redis 접속 화면' title='' src='/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/ca1dc/image-17.png' srcset='/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/e7570/image-17.png 170w,\n/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/f46e7/image-17.png 340w,\n/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/ca1dc/image-17.png 680w,\n/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/02d09/image-17.png 1020w,\n/dev-blog/static/79c1fcb12d264c698526b94d6e6495d3/b25d8/image-17.png 1117w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Redis 접속 화면</figcaption>\n  </figure></p>\n<ul>\n<li>POSTMAN을 이용하여 2개의 서로 다른 캐릭터를 조회해봤는데 Redis에 정상적으로 데이터가 들어간 것을 볼 수 있습니다.</li>\n</ul>\n<h2>3.2 클라이언트 페이지에서 랭킹 확인</h2>\n<p>  <figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 410px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/112dba15c44910ee385c4103f7431d05/cb1d0/image-18.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 124.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD+ElEQVR42q1VW28bRRT2D0G8A31BhYJEqQSqhHIjJWkoiD8Az6C+IB4p+QlFQognJJqmqlCE+kRFJWiaiKa5+H7dtZ2117HX3l3vfffjm7FjN01aCcFYR2fm7JlvZs4533EK/2EkSXLKlnrWEMcxHWOpoyiSOgxDORcAo+/UwodyNuD4JN/38NvGBtbWbuGPBw+w8etd/H7/PtZvr2Nt/Q4ePXqIW5zv7T7B7Tvr2Nzc5EHx828oTh4OhxgM+rCHNoa2BcuyaHNg2zYcx+Hahue61Ka0Pfvs1PPiw5fBdBNE8b+L6ynAJB6d6HkelEYb3W4XNm9jDgYwel3e1pZxFAfGcSL1iwHHTzBNGzv7WWw/2cVetoTdTBFbj/dRUg/h+eHI90U3FEAiu4n4ce6HMQwnQm8YSum7EQZejK4dwvFC1Os+SkUP1arPKkhOA4pniOcYhgGXzxWZj8KAmXcReEyCOZAiRkd3sbJUxfJHCmYuV1EuuZO4nwAUWTRNE0EQjOPoS5uIp8i2yQyLobc9zH1QxuX3Krj4VhHF4hmAJ4r2qaIW4NIeT4vddQPsPB7g4Z99bG8NuI4m5ZzC/zBG8U+mMRRzIfG4ZDqdI9TVBhqNBg7SaaiKyiQ0UKkwXuUKcrkCVLUpfaMowdO1nTqrZGq1Mjftc3MBu7t/I5/PoFDIYm9vB9vbm9ja+otxy43jFnBfSImmgJYVQ9NCtNshWq2QxcyS6SXoUfrGSBvUrG0mxCeYwdv2kU5rPFhHJq1DOxxMAX/4/gjvX6rg0xUFV68oWJyrSrm6WMMnKzUsUX84W8WV+SquLdfw2TUVy4sK1wo+XlKxMKPgpx97U8DV1SO8/FIJczN1XHxHwblXyjj3agWX3lUwP1/H2xeqeI22869XMTtbx8JCHW+eH9kuvFGVe27eNKaA935p4JvP01i9XsS3X+bx3VfHUqCtNFnfkLpIXcCNsd/q9Ty+/iKLez/XJBlTIg1xixkLbVLIYnBFkXqiOyL0DFjdGpLIkmth94dtij72GUkEB6HWQOK4oxsGLR2hH8EjfwOWAZUULyB/zaHktVjzE6yhy17pTnyE+LT7egcJGSUBw1YbMRkRydY+lYCtPyQzhIi10D79hD0SzDlmlcDoENAdA0bNQ9H/4bADx3SWpKSzxUbRp6NDfovh8rumqjjSNIZj1EB4Cnx28KDBsB0DeloLejqDw4ODE9LO5tDJ5amzaGUyUh/PNTKoub+PXqkM71CDw4NImxGgw9Oa7TZq9Tq7dEOK2mwiXyohm88jXyyiwHmOulguQxn7CX+dHd1iR7L5X3TyX++M/9iOrqPJjXpbJ787ZFGLzDHO6g6T/f8AKxw9WwKB6jAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='OMG 페이지 랭킹' title='' src='/dev-blog/static/112dba15c44910ee385c4103f7431d05/cb1d0/image-18.png' srcset='/dev-blog/static/112dba15c44910ee385c4103f7431d05/e7570/image-18.png 170w,\n/dev-blog/static/112dba15c44910ee385c4103f7431d05/f46e7/image-18.png 340w,\n/dev-blog/static/112dba15c44910ee385c4103f7431d05/cb1d0/image-18.png 410w' sizes='(max-width: 410px) 100vw, 410px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>OMG 페이지 랭킹</figcaption>\n  </figure></p>\n<ul>\n<li>클라이언트 페이지에서 확인해보았을 때도 정상적으로 랭킹이 나오는 것을 확인해볼 수 있었습니다.</li>\n</ul>\n<p>위와 같이 정상적으로 작동되는 것을 확인해볼 수 있었습니다. 해당 글에는 담지 않았지만 스케줄링도 정상적으로 동작하여 자정이 되면 초기화가 되는 것을 확인할 수 있었습니다. 이렇게 기존에 DB에 부하가 갈 수 있었던 문제를 Redis의 SortedSet을 활용하여 개선할 수 있었습니다. 이외에도 비즈니스 로직을 변경하여 쿼리문으로 조회하는 방식을 그대로 채택하고 실시간이 아닌 하루 단위로 랭킹을 산정하게된다면, 스케줄링을 이용하여 자정에 쿼리문으로 랭킹 데이터를 Redis에 넣고 Redis가 죽더라도 쿼리로 랭킹 데이터를 불러올 수 있는 방법도 구현해볼 수 있을 것 같습니다.</p>\n<p><strong>개발은 항상 일정한 답이 있다기보다 비즈니스 로직에 맞게 필요한 것들을 구현하는 것이 중요한 것 같습니다.</strong></p>\n<p>긴글 봐주셔서 감사합니다!</p>","frontmatter":{"title":"[OMG-8] 일일 캐릭터 조회 랭킹 Redis Sorted Set으로 개선하기","date":"June 07, 2024","update":"June 07, 2024","tags":["OMG","개발일지","서비스","게임","모바일","랭킹","백엔드","Redis","캐싱","Sorted Set"],"series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기"},"fields":{"slug":"/16/","readingTime":{"minutes":13.515}}},"seriesList":{"edges":[{"node":{"id":"fbb6dd9f-b5fe-5572-9f66-abb63917c06c","fields":{"slug":"/8/"},"frontmatter":{"title":"[OMG-1] 나 취업도 못했는데 실서비스 운영 한다!"}}},{"node":{"id":"d9a3fdf0-c2c6-5e38-8d4e-19b37a9fc375","fields":{"slug":"/9/"},"frontmatter":{"title":"[OMG-2] 기획자가 되어보자!"}}},{"node":{"id":"ce1621e5-748e-5a84-a7ed-7e83b0eff9b8","fields":{"slug":"/11/"},"frontmatter":{"title":"[OMG-3] API 요청 흐름에 대한 기능 설계 및 구현"}}},{"node":{"id":"efb7f7a6-8f21-5052-831b-e0f3a8428dcd","fields":{"slug":"/10/"},"frontmatter":{"title":"[OMG-4] 외부로 API 요청시 계속 Null이 나와요!"}}},{"node":{"id":"89b56ab8-b4aa-5a90-aae7-31db0a6ddc87","fields":{"slug":"/12/"},"frontmatter":{"title":"[OMG-5] dev 인프라 환경 ci/cd 구축하기"}}},{"node":{"id":"ebc3435a-d009-5d48-93fe-c38e33567868","fields":{"slug":"/14/"},"frontmatter":{"title":"[OMG-7] 일일 캐릭터 조회 랭킹 구현하기"}}},{"node":{"id":"8d0f272b-8f16-5116-b0ac-6013f542a633","fields":{"slug":"/13/"},"frontmatter":{"title":"[OMG-6] 나 백엔드인데 프론트(?)도 할 수 있다."}}},{"node":{"id":"ebe5e8aa-b589-564e-bf4d-05307ef1b652","fields":{"slug":"/16/"},"frontmatter":{"title":"[OMG-8] 일일 캐릭터 조회 랭킹 Redis Sorted Set으로 개선하기"}}}]},"previous":{"fields":{"slug":"/15/"},"frontmatter":{"title":"중심 좌표로부터 특정 거리에 속하는 데이터 불러오기"}},"next":null},"pageContext":{"id":"ebe5e8aa-b589-564e-bf4d-05307ef1b652","series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기","previousPostId":"95139dc9-c381-5d58-bd62-4451dbd3305f","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}