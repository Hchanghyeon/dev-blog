{"componentChunkName":"component---src-templates-post-jsx","path":"/10/","result":{"data":{"site":{"siteMetadata":{"title":"황창구리의 개발 블로그"}},"markdownRemark":{"id":"efb7f7a6-8f21-5052-831b-e0f3a8428dcd","excerpt":"문제 Spring 서버에서 다른 게임사 서버로 API 요청시, 응답 값을 모두 null로 반환하는 문제가 발생했습니다. GameService.java MapleStoryMRestTemplate.java CharacterBasic.java 위는 API를 요청하는 코드와 응답 객체이며 getCharacterBasic에도 응답 값에 대한 설정으로 Charact…","html":"<h2>문제</h2>\n<p>Spring 서버에서 다른 게임사 서버로 API 요청시, 응답 값을 모두 null로 반환하는 문제가 발생했습니다.</p>\n<p><strong>GameService.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMapleStoryMCharacterInfo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Ocid</span> ocid <span class=\"token operator\">=</span> mapleStoryMRestTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterOcid</span><span class=\"token punctuation\">(</span>characterName<span class=\"token punctuation\">,</span> worldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterBasic</span> characterBasic <span class=\"token operator\">=</span> mapleStoryMRestTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterBasic</span><span class=\"token punctuation\">(</span>ocid<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// API 요청</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>characterBasic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 간단히 테스트 해보기 위한 조회로 사용</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>MapleStoryMRestTemplate.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">CharacterBasic</span> <span class=\"token function\">getCharacterBasic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token function\">createBasicApiUri</span><span class=\"token punctuation\">(</span>ocid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">createHttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token class-name\">CharacterBasic</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>CharacterBasic.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">CharacterBasic</span><span class=\"token punctuation\">(</span>\n        <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span> characterDateCreate<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위는 API를 요청하는 코드와 응답 객체이며 getCharacterBasic에도 응답 값에 대한 설정으로 CharacterBasic.class가 잘 들어가있습니다.</p>\n<img width='402' alt='image' src='https://github.com/Hchanghyeon/dev-troubleshooting/assets/92444744/167dba4e-e81a-4256-8771-9cdc852acf3a'>\n<p>실제로 API를 요청시 위와 같이 요청 값에 대한 응답으로 모두 null 처리가 되는 것을 볼 수 있습니다.</p>\n<h2>문제 분석</h2>\n<p><strong>GameService.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getMapleStoryMCharacterInfo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Ocid</span> ocid <span class=\"token operator\">=</span> mapleStoryMRestTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterOcid</span><span class=\"token punctuation\">(</span>characterName<span class=\"token punctuation\">,</span> worldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterBasic</span> characterBasic <span class=\"token operator\">=</span> mapleStoryMRestTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterBasic</span><span class=\"token punctuation\">(</span>ocid<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// API 요청</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>characterBasic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>우선 위 코드에서 첫번째 API요청인 getCharacterOcid 메서드는 정상적으로 응답 값을 받아오는 것을 확인하였습니다. 하지만 첫번째 API로 받아오는 ocid의 값을 통해 CharacterBasic을 요청하려고하니 응답 값으로 모두 null이 나오는 것을 확인해볼 수 있었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">Ocid</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>필드로 가지고 있는 값은 ocid 값 하나로 위에서 문제되었던 CharacterBasic 레코드와 특별히 다를 건 없었습니다. </p>\n<img width='304' alt='image' src='https://github.com/Hchanghyeon/dev-troubleshooting/assets/92444744/2f2f78ee-66e9-48f9-900d-cd816c8edd60'>\n<p>그래서 게임사 API 응답 값을 찾아보았는데 json의 key 값이 camelcase가 아닌 snakecase 형식으로 응답하고 있는 것을 확인해볼 수 있었습니다. 결국 Ocid의 값인 ocid는 '_' 와 같은 특수문자가 없었고 문자의 형태(소문자, 대문자)가 게임사에서 응답하는 형태와 동일했기 때문에 정상적으로 받아올 수 있었고, CharacterBasic안에 들어있는 값은 문자열 형태가 모두 camelcase로 json의 키 값과 형태가 달라 null값이 나오고 있던 것이었습니다.</p>\n<h2>해결</h2>\n<p>Spring 서버에서 외부 서버로 API 요청을 한 이후 응답을 받으면 일반적으로 json 형태로 데이터를 받게 됩니다. json 형태로 응답 받은 데이터는 Spring 서버에서 사용할 수 없기 때문에 json 형태의 데이터에서 자바 객체의 형태로 역직렬화해야합니다.</p>\n<p>이때 이 과정을 도와주는 것이 MappingJackson2HttpMessageConverter입니다. 하지만 위에서 json의 키 값이 calmelcase가 아닌 snakecase가 적용되어있어서 데이터를 받지 못하고 있다고 언급했었습니다. 왜 자동으로 snakecase를 인식해서 처리하지 못할까요?</p>\n<p>우선, HttpMessage를 변환할 때 사용하는 것은 MappingJackson2HttpMessageConverter가 맞으나, 실제로 json에서 자바 객체로 역직렬화할 때는 그 안에 사용되는 ObjectMapper를 이용해서 처리하게 됩니다.</p>\n<p><strong>MappingJackson2HttpMessageConverter.java</strong>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/f27d8/image-3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 39.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVR42nWRW3KDMAxF2UcD+G2MHxgCJLTZ/7ZuZadJk87044ws2bqSrMZZizAMSCEgTTNiykh5wXzeyF8QI8XGgGn09ezjBBcSAr0LqfgZzkcwodAxgaZjEkZpBErIaSLhiLxsWNb9bqcNa9hx9jv2eEFyGVaNKHkfbY9TxypF7Cl46jlacvpSRcharcClBitwivGfmNCQ0qCn2IOHWBXkUmHOI3wYIZWFVo4S7NujV1rGK//dN6WCUQpaWyjt6OygSPAxyl9amqbrRbWvvAkyTSPQqBUS58bAjRHWeQy0kIJ1ofqCCjP6c65M/RKu73T8RVDRlo2nkQfqMAWEPGO7HFi3K9b9qJTtKuueghX5a1su6h4aQY6jjsQwQbgFfMjgbgYjyyjGbKzdZZrik+zXmHDzRJhwkH+1HtfB41beGIdvAsvnIqBjjXYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='MappingJackson2HttpMessageConverter.java' title='' src='/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/ca1dc/image-3.png' srcset='/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/e7570/image-3.png 170w,\n/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/f46e7/image-3.png 340w,\n/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/ca1dc/image-3.png 680w,\n/dev-blog/static/ac90e214e7a34d3ee245fff40273bf75/f27d8/image-3.png 847w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>MappingJackson2HttpMessageConverter.java</figcaption>\n  </figure></p>\n<p>해당 자바 클래스를 확인해보면 기본 생성자로 생성시 Jacson2ObjectMapperBuilder.json().build()를 호출하는 것을 확인해볼 수 있습니다.</p>\n<p><strong>Jackson2ObjectMapperBuilder.java</strong>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 631px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/166837ba5eaabb0ca1fdc88e402b4b49/077d3/image-5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 21.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVR42m2PzXLCMAyE8x6d+t+WHDtAM5MmFCgHLskM7/86W5EApx6+2dVoJcuNdh6ptPA5Q3OF4e6thip0kh7RRkobzAgPZOYxZ7Jk292abXyIoFq2hnidGDZlWJL65UVNJHwEgqMWTnLKOmjrV5QNUE4Q34QY8ZsZsyy91Ra3fsByPON+vmL5ueB+ua71PJ1w2n1j6Hq5kvGpLJRxT+ybhrsv9FQwCYO8Psr5Y9ljEkb5xrFuOpYDplxRfYINDB/zv/wB1At2bjBJkpAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Jackson2ObjectMapperBuilder.java' title='' src='/dev-blog/static/166837ba5eaabb0ca1fdc88e402b4b49/077d3/image-5.png' srcset='/dev-blog/static/166837ba5eaabb0ca1fdc88e402b4b49/e7570/image-5.png 170w,\n/dev-blog/static/166837ba5eaabb0ca1fdc88e402b4b49/f46e7/image-5.png 340w,\n/dev-blog/static/166837ba5eaabb0ca1fdc88e402b4b49/077d3/image-5.png 631w' sizes='(max-width: 631px) 100vw, 631px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Jackson2ObjectMapperBuilder.java</figcaption>\n  </figure></p>\n<p>호출하는 json() 메서드를 보게되면 별도의 설정 없이 객체를 생성해서 넘기는 것을 확인해볼 수 있습니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/b56f81c868a74290f04d9aed176efe75/5f864/image-2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 73.52941176470587%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuUlEQVR42qWT/ZLTMAzE+yBcmvhDsiXHSWF4/0cTK7XTGzhuKPCHxq2c/KzddS5EbMJk2rrNedo8TjvOm439NGK1lKqlypbxXMa65WprKlHXLaPSY83Ruyz+A81aANUdEDYWVBMT/G8yjIdam8P6vlvXGb2OPe5qhEO4S/Qqd7s4eQO55GIVm5XlfaLMmBB7lYzwcqFmb8tqX1DLmj6UswB0UIVsNhU1hVQ/WffDZBzGkD3atN4w1bM/Q56D367b50ARCaCPHy/uLg89ABtBOibc0Z/H13gmwSYH/wLMVko1BpThAT98I4RERPCyWnt4xKRWc4MVBfvu8QwbfgbihAqgwDPt3fZx2pAT0+6YWvFyRVA9gOHhuqFSSP1UMnNFwi1CKQiilo7k/RqkO+D6Xr8L44NkIgDlPgWRwIIWUyx/Wc8JWyOY3cMXh1EV8/4/AnNIHopAGkwH0HvL/0zo16Z3DtP9Mq9rfvi1hYfLur0OXAB02HloeNgYadZunv6G79jrVflPyYoJZ2umuB5C91UhfSBtL42pXwSuOP0bUv4OD098WjfUgXAmQLcidiKgm1/ma/pj8g78AexTqjLOI3r5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='PropertyNamingStrategy 필드' title='' src='/dev-blog/static/b56f81c868a74290f04d9aed176efe75/ca1dc/image-2.png' srcset='/dev-blog/static/b56f81c868a74290f04d9aed176efe75/e7570/image-2.png 170w,\n/dev-blog/static/b56f81c868a74290f04d9aed176efe75/f46e7/image-2.png 340w,\n/dev-blog/static/b56f81c868a74290f04d9aed176efe75/ca1dc/image-2.png 680w,\n/dev-blog/static/b56f81c868a74290f04d9aed176efe75/02d09/image-2.png 1020w,\n/dev-blog/static/b56f81c868a74290f04d9aed176efe75/5f864/image-2.png 1066w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>PropertyNamingStrategy 필드</figcaption>\n  </figure>\n이때 중요한 것이 기본으로 객체를 생성할 때 필드에 있는 <strong>PropertyNamingStrategy</strong>인데, 이 필드 객체가 json안에 들어가는 key값을 어떤 형태로 지정해서 변환하겠냐는 설정 값입니다.</p>\n<p><strong>PropertyNamingStrategies.java</strong>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/0c082/image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 45.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVR42o1SW3LCMBDLQUqC32+bENJhev97Cdm0HYYybT+ENstaa613it7jUhO2ktBKRTudse1X7NcPxNLgU4HQFodFYD7KPzEJZeCtHXDOw1kHSzgTYVQgPKR2mFn3L8GjUNDaQCkFKRVUB2MtLTTFtHIQymKW+vuWv912WihofIJ2vNEXfOfAXBixsh7KOOgn7mdfCvpcEXLjzE6DQ5/dQ87GPMR708G9CXnm2cMry+qoIGYBQSuDCbk8QrLmJ3pePgs6JmuMaK2i1nxHuaPVwpe/c0kRmXUlpxGXlJD6Oc52eRT0/IkxILZCq5kWMznRbhrx+GYT4/j6wcNyzSxjF8LIpS5EF2+fDzUpdti8w8pVOXN1Vq7OxtntdcWF8+vxFire/Ql7aKzLWGPB3lbs/P/CecdEd36FNRE3jtsDr0GDa9cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='PropertyNamingStrategies.java' title='' src='/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/ca1dc/image.png' srcset='/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/e7570/image.png 170w,\n/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/f46e7/image.png 340w,\n/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/ca1dc/image.png 680w,\n/dev-blog/static/ec0c90a65598ab09255315f9ef006f0c/0c082/image.png 804w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>PropertyNamingStrategies.java</figcaption>\n  </figure></p>\n<p>그래서 PropertyNamingStrategies 클래스에 들어가 주석을 확인해보니 Java 기본 설정으로 <strong>LOWER<em>CAMEL</em>CASE</strong>가 적용되어 있다는 것을 확인해볼 수 있었습니다.</p>\n<blockquote>\n<p>Naming convention used in Java, where words other than first are capitalized and no separator is used between words. Since this is the native Java naming convention, naming strategy will not do any transformation between names in data (JSON) and POJOS. Example external property names would be \"numberValue\", \"namingStrategy\", \"theDefiniteProof\".</p>\n</blockquote>\n<blockquote>\n<p>자바에서 사용되는 명명 규칙으로, 첫 번째 단어가 아닌 다른 단어는 대문자로 표시되고 단어 사이에 구분자가 사용되지 않습니다. 이것은 기본 자바 명명 규칙이기 때문에, 명명 전략은 데이터(JSON)와 POJOS의 이름 사이에 어떠한 변환도 수행하지 않습니다.\n예를 들어 외부 속성 이름은 \"numberValue\", \"nameStrategy\", \"DefiniteProof\" 등이 있습니다.</p>\n</blockquote>\n<p>결국 문제가 되는 부분은 게임사로부터 응답 받는 json의 데이터의 key 값이 snakecase로 들어오고 있는데, Spring 서버의 ObjectMapper의 기본 설정은 camelcase여서 json이 java 객체로 변환되지 않는거였습니다. 그래서 저는 RestTemplate을 이용하여 HttpMessage를 변환할 때 기본 설정 값을 snakecase로 변경하면 되겠다 생각이 들었고 아래와 같이 변경하여 처리했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@NoArgsConstructor</span><span class=\"token punctuation\">(</span>access <span class=\"token operator\">=</span> <span class=\"token class-name\">AccessLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PRIVATE</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RestTemplateConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RestTemplate</span> <span class=\"token function\">restTemplate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">RestTemplateBuilder</span> restTemplateBuilder<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> restTemplateBuilder\n                <span class=\"token punctuation\">.</span><span class=\"token function\">messageConverters</span><span class=\"token punctuation\">(</span><span class=\"token function\">getSnakeToCamelMessageConverter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 기본 messageConverter 설정</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setConnectTimeout</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setReadTimeout</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">MappingJackson2HttpMessageConverter</span> <span class=\"token function\">getSnakeToCamelMessageConverter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">ObjectMapper</span> objectMapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setPropertyNamingStrategy</span><span class=\"token punctuation\">(</span><span class=\"token constant\">SNAKE_CASE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// objectMapper를 생성하여 ProperyNaming 전략을 SNAKE_CASE로 변경</span>\n\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">MappingJackson2HttpMessageConverter</span> converter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MappingJackson2HttpMessageConverter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        converter<span class=\"token punctuation\">.</span><span class=\"token function\">setObjectMapper</span><span class=\"token punctuation\">(</span>objectMapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 전략이 변경된 ObjectMapper를 새로운 MessageConverter에 적용 </span>\n\n        <span class=\"token keyword\">return</span> converter<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>적용 순서</strong></p>\n<ol>\n<li>\n<p>새로운 ObjectMapper 생성하여 네이밍 전략을 snakecase로 변경</p>\n<ul>\n<li>프로젝트에서 사용하는 모든 API 요청 응답이 snakecase로 변경되어있어 네이밍 전략을 바꿔도 괜찮다고 생각했습니다.</li>\n</ul>\n</li>\n<li>새로운 MappingJackson2HttpMessageConverter를 생성하여 1번에서 생성한 ObjectMapper를 적용</li>\n<li>RestTemplate을 생성하여 Bean으로 올릴 때 기본 messageConverter를 새로 생성한 MappingJackson2HttpMessageConverter로 변경하여 적용</li>\n</ol>\n<p><strong>RestTemplateBuilder의 messageConverters 메서드</strong>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/e4da8/image-7.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 28.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVR42lWR23KDMAxE+ZBC8A3b+EYIJGlo+9D//6ft2sx02ocz3pEtaSV3NkWYVKDLCp0XaGqTEmxmPMyYKjFCxQyVeB8ibAqMBWjvcREKwyh/6RwLWia4chZxObXHlihrIacJQhuMSkOaUzeoL/J/sbPgnKDdDBNjc2ZyhrS+JUjrIMigDPpRob8I9MOIN9I0+asrXeRILhY6XOGXrZ0yXDHON4i4NVy5wecVls0Nm1kfIKTBRCPVkJtji41Soysced/ueB1fjYPszw/sxzfS9Y7t8UnesR0P3F5PLI+9rccED18y4rrQEKecHFfAgmaycBxrpsuKCwm+EVvnqmvc81NsdUKqk5o8CIle1N2pRv2gHy2VsLprUlwMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='messageConverters 메서드' title='' src='/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/ca1dc/image-7.png' srcset='/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/e7570/image-7.png 170w,\n/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/f46e7/image-7.png 340w,\n/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/ca1dc/image-7.png 680w,\n/dev-blog/static/709c234236307fdb8cdd8f00864ea72f/e4da8/image-7.png 766w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>messageConverters 메서드</figcaption>\n  </figure></p>\n<blockquote>\n<p>Set the HttpMessageConverters that should be used with the RestTemplate. Setting this value will replace any previously configured converters and any converters configured on the builder will replace RestTemplate's default converters.</p>\n</blockquote>\n<blockquote>\n<p>RestTemplate와 함께 사용할 HttpMessageConverters를 설정합니다. 이 값을 설정하면 이전에 구성된 모든 변환기가 대체되고 빌드에서 구성된 모든 변환기가 RestTemplate의 기본 변환기를 대체합니다.</p>\n</blockquote>\n<p><strong>적용 후</strong></p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/44e31/image-6.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 21.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR42kVQWxKDIAz0NK0PsCKIgIq20/tfacvG0X7sZPPcJNUwOkxzhPMRdgqFJ/FHN8PYCY+6Rd0qtKpH02l0+oVnowo/feZoL78y1iMuGSFtYn1YMcdVBvqwSPwCxbgAxVkj8WIpzGXsNKNi4/H+yrC8f+7mtO5YtuPmxF7qTp6x5gNp2bGVnn9tRtUPVoZRlRvQOh/ObXm+P9+hX2OBgeqHAlNO1cIZY67Tg7zlB2RugcYobxqtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='적용 후 응답 값' title='' src='/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/ca1dc/image-6.png' srcset='/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/e7570/image-6.png 170w,\n/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/f46e7/image-6.png 340w,\n/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/ca1dc/image-6.png 680w,\n/dev-blog/static/ccf83dd49728aa3466ffa813cb29054e/44e31/image-6.png 949w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>적용 후 응답 값</figcaption>\n  </figure></p>\n<p>적용 후 위 사진과 같이 데이터가 null이 아닌 정상 값으로 나오게 되었습니다.</p>","frontmatter":{"title":"[OMG-4] 외부로 API 요청시 계속 Null이 나와요!","date":"February 29, 2024","update":"February 29, 2024","tags":["OMG","개발일지","서비스","게임","모바일","트러블 슈팅","MessageConverter"],"series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기"},"fields":{"slug":"/10/","readingTime":{"minutes":8.02}}},"seriesList":{"edges":[{"node":{"id":"fbb6dd9f-b5fe-5572-9f66-abb63917c06c","fields":{"slug":"/8/"},"frontmatter":{"title":"[OMG-1] 나 취업도 못했는데 실서비스 운영 한다!"}}},{"node":{"id":"d9a3fdf0-c2c6-5e38-8d4e-19b37a9fc375","fields":{"slug":"/9/"},"frontmatter":{"title":"[OMG-2] 기획자가 되어보자!"}}},{"node":{"id":"efb7f7a6-8f21-5052-831b-e0f3a8428dcd","fields":{"slug":"/10/"},"frontmatter":{"title":"[OMG-4] 외부로 API 요청시 계속 Null이 나와요!"}}},{"node":{"id":"89b56ab8-b4aa-5a90-aae7-31db0a6ddc87","fields":{"slug":"/12/"},"frontmatter":{"title":"[OMG-5] dev 환경 ci/cd 구축하기"}}},{"node":{"id":"ce1621e5-748e-5a84-a7ed-7e83b0eff9b8","fields":{"slug":"/11/"},"frontmatter":{"title":"[OMG-3] API 요청 흐름에 대한 기능 설계 및 구현"}}}]},"previous":{"fields":{"slug":"/9/"},"frontmatter":{"title":"[OMG-2] 기획자가 되어보자!"}},"next":{"fields":{"slug":"/12/"},"frontmatter":{"title":"[OMG-5] dev 환경 ci/cd 구축하기"}}},"pageContext":{"id":"efb7f7a6-8f21-5052-831b-e0f3a8428dcd","series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기","previousPostId":"d9a3fdf0-c2c6-5e38-8d4e-19b37a9fc375","nextPostId":"89b56ab8-b4aa-5a90-aae7-31db0a6ddc87"}},"staticQueryHashes":[],"slicesMap":{}}