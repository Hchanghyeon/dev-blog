{"componentChunkName":"component---src-templates-post-jsx","path":"/11/","result":{"data":{"site":{"siteMetadata":{"title":"황창구리의 개발 블로그"}},"markdownRemark":{"id":"ce1621e5-748e-5a84-a7ed-7e83b0eff9b8","excerpt":"안녕하세요. 저번 글에서는 프로젝트에서 구현할 기능들과 간단한 서비스 흐름도를 그려보며 설계를 해보았습니다. 이번 글에서는 프로젝트의 핵심 주요 기능에 대한 흐름을 설계하여 그림으로 좀 더 자세하게 표현하고 설명해보고자 합니다. 우선 OMG 프로젝트의 기본 기능 흐름도는 아래와 같습니다. 기본 기능 흐름도  클라이언트가 메이플스토리M의 캐릭터 명과 캐릭터…","html":"<p>안녕하세요. 저번 글에서는 프로젝트에서 구현할 기능들과 간단한 서비스 흐름도를 그려보며 설계를 해보았습니다.</p>\n<p>이번 글에서는 프로젝트의 핵심 주요 기능에 대한 흐름을 설계하여 그림으로 좀 더 자세하게 표현하고 설명해보고자 합니다.</p>\n<p>우선 OMG 프로젝트의 기본 기능 흐름도는 아래와 같습니다.</p>\n<h3>기본 기능 흐름도</h3>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/97d01/image.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 17.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4klEQVR42m2PTUrEQBCFs/Fw4hG8h1vxALpz7S3EpQq6cCGomxlQEoX8x7Tdme6Z7nTy2WmYhWDBR0G9R72qRGmHnyamwH81zzN6o9GDYbe1eO//6H4c6XqBGDQuaIkpr2H7FZZC2zTkeU5RFLEvOOtoRc1b9kRar+JCIUT0VGWJdSObKkOvH3HpMwl3B+zWp5gRjFbR3HVdRCoZToCXzwfObo65vD9BDQopJU0Ib5saE3R5e4U8P0RcHJF4+YozJfuP+76P6QvW2jhT5oesW5H3Kc656Nl/sFw4Dt/Y6j3wwS+sOytFxvXtsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='alt text' title='' src='/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/ca1dc/image.png' srcset='/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/e7570/image.png 170w,\n/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/f46e7/image.png 340w,\n/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/ca1dc/image.png 680w,\n/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/02d09/image.png 1020w,\n/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/9d567/image.png 1360w,\n/dev-blog/static/30c42d447c4b5105639c8fc0ed858735/97d01/image.png 1814w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>alt text</figcaption>\n  </figure></p>\n<ol>\n<li>클라이언트가 메이플스토리M의 캐릭터 명과 캐릭터 월드명을 웹페이지에 입력하여 Spring 서버로 전달합니다.</li>\n<li>전달 받은 Spring서버는 클라이언트의 캐릭터 명과 캐릭터 월드명을 이용하여 게임사 서버로 캐릭터 정보를 달라고 요청합니다.</li>\n<li>요청을 받은 게임사 API 서버는 캐릭터 정보를 Spring 서버로 응답합니다.</li>\n<li>게임사로부터 받은 캐릭터 응답 값을 Spring서버에서 하나로 모아 클라이언트에게 응답합니다.</li>\n</ol>\n<p>위 네가지 순서는 OMG 프로젝트의 기본 기능이면서 제일 중요한 기능으로 볼 수 있습니다. 이 기능을 메이플스토리M 게임에 빗대어 자세하게 설명해보도록 하겠습니다.</p>\n<h3>MapleStoryM 캐릭터 조회 기능 흐름도</h3>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/11bd9/image-1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 76.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC3UlEQVR42pWTzWsUdxjHc/DQ2lP/BwsKpRXE1Jte7KGHHgueiiWePYhgSuvLRdFSrNBjL5LENChIoQYKbV7FGjckcRO1SfYl+zbr7M7b7uy8z87HZ3cSGkEJGXhmDvPjw+f7e55nwA9CLDvE9bvEcYxtd7CsFlarjWZatDsOvufjOQFhEBH4HlqjjqpUcdsmQRhheyFB3KXb7TLgtasY+Qm8+iSBZ5JZrzH7vEDmVYn5bIHXDQO1WeNleRnVrOE4LqqqojUbuJqGJXA9O4Obe0bsdRiIm5MwPQCzH+Lry4RdiOKobxvFIb3n382/GBo/zt0nNzC1FvW6Ql2pUddbaGvzmMOH0X88SlD7T4CNSZKpHvAgcXuVpI/opu8k/S5X5hgaG+T+8h2Jn7BeLPeBRsshrKyiDX+KfnWQQNlIgUylhu8Flmc5d+8LxhZ+otNyUcSwIWWbNs21x+jfC/DK8f0A5/rA0YVbtC2XnBhu5IqU5X47+cVtYM9wfRv4zx5AiXx29BgTS7dJYth6rVOWcoNEImfRLskdXj62Y/gnzByA+Y8FmH0ncKUyz4WHXzGxeEciO3J/VZpStimjJZGN6ycxbn25Y/gojTz30XsNe8DzD07ze+Y2ltkhV6qykS+RUy2MV08xrp0Q6Kldkaf2jvzdduQwgM1SjdxWlbrm0NpcQr90ZHfk/TRFumx1aMowN+tV2Sgb4+WTXV1+y/D/yImAkiSRVYq3Iwtw/ATjmZ8xDYfM2gZLa+soqk5QzqbAt+bwbwFOf0BgrqRuO8AkBS5uTfHtyFFGFm7idgLK1RqKotCWpugvHqNdPIT2w2epYaTPwLNPiBc+x26soFsOhUKBQnGLzUIRz41YrTzlyuQZ/lj5DUPWrVgqkZd/FTG0i89p/fI11q/fEKhFAUYhcej0qzdkiumSyWu8qJhUNBvHj+id8UKvv9uuH1LTbRQpx/Xoyt5HvkscuP1zbwBFKx6Lq3WWuAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='alt text' title='' src='/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/ca1dc/image-1.png' srcset='/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/e7570/image-1.png 170w,\n/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/f46e7/image-1.png 340w,\n/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/ca1dc/image-1.png 680w,\n/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/02d09/image-1.png 1020w,\n/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/9d567/image-1.png 1360w,\n/dev-blog/static/96b94b3573ed1d994336e2f6f7eb57e5/11bd9/image-1.png 1420w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>alt text</figcaption>\n  </figure></p>\n<ol>\n<li>메이플스토리M 게임의 캐릭터 명과 캐릭터 월드명을 Spring Server로 전달합니다.</li>\n<li>전달 받은 캐릭터명과 캐릭터 월드명을 이용하여 캐릭터 고유 번호를 요청합니다.</li>\n<li>\n<p>캐릭터 고유 번호를 응답받습니다.</p>\n<ul>\n<li>해당 게임의 API는 무조건 사용자 이름과 월드명을 통해 ocid라는 캐릭터 고유 번호를 받고 해당 고유 번호로 캐릭터의 정보를 요청할 수 있게 되어있습니다.</li>\n</ul>\n</li>\n<li>캐릭터 기본 정보를 요청합니다.</li>\n<li>캐릭터 기본 정보를 응답받습니다.</li>\n<li>캐릭터 장비 정보를 요청합니다.</li>\n<li>캐릭터 장비 요청을 받습니다.</li>\n<li>캐릭터 스탯 정보를 요청합니다.</li>\n<li>캐릭터 스탯 정보를 응답받습니다.</li>\n<li>캐릭터 길드 정보를 요청합니다.</li>\n<li>캐릭터 길드 정보를 응답받습니다.</li>\n<li>게임사로부터 받은 모든 정보를 종합하여 클라이언트에게 응답합니다.</li>\n</ol>\n<h3>RestTemplate 동기를 사용한 이유</h3>\n<p>우선, 3번에서 말씀드렸듯이 사용자의 캐릭터 명과 캐릭터 월드명을 이용하여 ocid를 먼저 받은 다음, ocid로 나머지 캐릭터에 대한 정보를 요청해야합니다. 그래서 2번에서 API를 요청할 때는 무조건 동기적으로 작동해야하고, 나머지 4번부터 11번 사이의 요청들은 비동기로 돌아가도 됩니다. 저는 우선 ocid를 제외한 API 요청은 4개여서 요청 개수가 적다고 생각이 들었고, 요청마다의 응답시간이 길지 않았기 때문에 동기적으로 동작시켜도 괜찮겠다고 생각이 들었습니다.</p>\n<h3>기본 기능 코드</h3>\n<p>이번에는 위의 기능을 코드로 옮겨보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>클라이언트가 메이플스토리M의 캐릭터 명과 캐릭터 월드명을 웹페이지에 입력하여 Spring 서버로 전달합니다.</p>\n<p><strong>GameController.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/games\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GameController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">GameService</span> gameService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/maplestorym\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MapleStoryMCharacterInfoResponse</span><span class=\"token punctuation\">></span></span>     <span class=\"token function\">getCharacterInfo</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapleStoryMCharacterInfoResponse</span>  mapleStoryMCharacterInfoResponse <span class=\"token operator\">=</span> gameService<span class=\"token punctuation\">.</span>  <span class=\"token function\">getMapleStoryMCharacterInfo</span><span class=\"token punctuation\">(</span>\n                characterName<span class=\"token punctuation\">,</span>\n                worldName\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>mapleStoryMCharacterInfoResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Controller를 통해 characterName과 worldName을 받습니다.</li>\n</ul>\n</li>\n<li>\n<p>전달 받은 Spring서버는 클라이언트의 캐릭터 명과 캐릭터 월드명을 이용하여 게임사 서버로 캐릭터 정보를 달라고 요청한 이후 클라이언트에게 응답합니다.</p>\n<p><strong>GameService.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GameService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapleStoryMApi</span> mapleStoryMApi<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MapleStoryMCharacterInfoResponse</span> <span class=\"token function\">getMapleStoryMCharacterInfo</span><span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Character</span> character <span class=\"token operator\">=</span> mapleStoryMApi<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterOcid</span><span class=\"token punctuation\">(</span>characterName<span class=\"token punctuation\">,</span> worldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 캐릭터 고유 번호</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterBasic</span> characterBasic <span class=\"token operator\">=</span> mapleStoryMApi<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterBasic</span><span class=\"token punctuation\">(</span>character<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 캐릭터 기본 정보</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterItemEquipment</span> characterItemEquipment <span class=\"token operator\">=</span> mapleStoryMApi<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterItem</span><span class=\"token punctuation\">(</span>character<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 캐릭터 장비 정보</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterStat</span> characterStat <span class=\"token operator\">=</span> mapleStoryMApi<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterStat</span><span class=\"token punctuation\">(</span>character<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 캐릭터 스탯 정보</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">CharacterGuild</span> characterGuild <span class=\"token operator\">=</span> mapleStoryMApi<span class=\"token punctuation\">.</span><span class=\"token function\">getCharacterGuild</span><span class=\"token punctuation\">(</span>character<span class=\"token punctuation\">.</span><span class=\"token function\">ocid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 캐릭터 길드 정보</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">MapleStoryMCharacterInfoResponse</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>\n                characterBasic<span class=\"token punctuation\">,</span>\n                characterItemEquipment<span class=\"token punctuation\">,</span>\n                characterStat<span class=\"token punctuation\">,</span>\n                characterGuild\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>GameService에서는 받은 characterName과 worldName을 이용해서 게임사 API 서버로 캐릭터에 대한 정보를 종류별로 요청하고 받은 값을 모두 종합하여 하나의 캐릭터 종합 정보로 클라이언트에게 응답합니다.</li>\n</ul>\n<p><strong>MapleStoryMApi.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MapleStoryMApi</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">Character</span> <span class=\"token function\">getCharacterOcid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">CharacterBasic</span> <span class=\"token function\">getCharacterBasic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">CharacterItemEquipment</span> <span class=\"token function\">getCharacterItem</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">CharacterStat</span> <span class=\"token function\">getCharacterStat</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">CharacterGuild</span> <span class=\"token function\">getCharacterGuild</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ocid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>MapleStoryMApi는 MapleStoryM API 서버에 캐릭터와 관련된 정보를 요청하기 위한 인터페이스입니다. 클래스로 작성해도되지만, 인터페이스로 작성한 이유는 추후 RestTemplate의 동기 방식이 성능이 좋지 않을 경우 WebClient를 이용한 비동기 처리로 유연하게 변경하기 위함입니다.</li>\n</ul>\n<p><strong>MapleStoryMApiRestTemplate.java</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MapleStoryMApiRestTemplate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MapleStoryMApi</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">RestTemplate</span> restTemplate<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MapleStoryMProperties</span> mapleStoryMProperties<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Character</span> <span class=\"token function\">getCharacterOcid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> restTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token function\">createOcidApiUri</span><span class=\"token punctuation\">(</span>characterName<span class=\"token punctuation\">,</span> worldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">createHttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token class-name\">Character</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">createOcidApiUri</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> characterName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span>   <span class=\"token class-name\">String</span> worldName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">UriComponentsBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromHttpUrl</span><span class=\"token punctuation\">(</span>\n                        mapleStoryMProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getBaseUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>    mapleStoryMProperties<span class=\"token punctuation\">.</span><span class=\"token function\">getOcidApiUri</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">queryParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"character_name\"</span><span class=\"token punctuation\">,</span> characterName<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">queryParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world_name\"</span><span class=\"token punctuation\">,</span> worldName<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">toUriString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> 여러 <span class=\"token constant\">API</span> 요청 메서드\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>API 요청 구현 코드이며, 메이플스토리M에 대한 모든 API 요청을 위한 클래스입니다.</li>\n</ul>\n</li>\n</ol>\n<p>자, 지금까지 OMG 프로젝트의 기본 기능에 대한 설계와 코드에 대해서 살펴보았습니다. 현재는 MapleStoryM에 대한 코드만 있지만, 추후 확장하면서 다른 게임들도 모두 이런식으로 게임사 API 서버를 통해 데이터를 받아 응답할 예정입니다.</p>","frontmatter":{"title":"[OMG-3] API 요청 흐름에 대한 기능 설계 및 구현","date":"March 01, 2024","update":"March 01, 2024","tags":["OMG","개발일지","서비스","게임","모바일","트러블 슈팅","기능 설계"],"series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기"},"fields":{"slug":"/11/","readingTime":{"minutes":7.665}}},"seriesList":{"edges":[{"node":{"id":"fbb6dd9f-b5fe-5572-9f66-abb63917c06c","fields":{"slug":"/8/"},"frontmatter":{"title":"[OMG-1] 나 취업도 못했는데 실서비스 운영 한다!"}}},{"node":{"id":"d9a3fdf0-c2c6-5e38-8d4e-19b37a9fc375","fields":{"slug":"/9/"},"frontmatter":{"title":"[OMG-2] 기획자가 되어보자!"}}},{"node":{"id":"efb7f7a6-8f21-5052-831b-e0f3a8428dcd","fields":{"slug":"/10/"},"frontmatter":{"title":"[OMG-4] 외부로 API 요청시 계속 Null이 나와요!"}}},{"node":{"id":"89b56ab8-b4aa-5a90-aae7-31db0a6ddc87","fields":{"slug":"/12/"},"frontmatter":{"title":"[OMG-5] dev 환경 ci/cd 구축하기"}}},{"node":{"id":"ce1621e5-748e-5a84-a7ed-7e83b0eff9b8","fields":{"slug":"/11/"},"frontmatter":{"title":"[OMG-3] API 요청 흐름에 대한 기능 설계 및 구현"}}}]},"previous":{"fields":{"slug":"/12/"},"frontmatter":{"title":"[OMG-5] dev 환경 ci/cd 구축하기"}},"next":null},"pageContext":{"id":"ce1621e5-748e-5a84-a7ed-7e83b0eff9b8","series":"취업도 못해본 개발자의 우당탕탕 실서비스 개발 및 운영 이야기","previousPostId":"89b56ab8-b4aa-5a90-aae7-31db0a6ddc87","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}